<section class="magazine-section my-5">
  <div class="row">
    <div class="col-lg-2 col-md-12">
      <mat-accordion [multi]="true">
        <mat-expansion-panel hideToggle="true">
          <mat-expansion-panel-header>
            <mat-panel-title (click)="onSelectAll()" [style.background-color]="all === 'initial' ? '#94c3f4' : ''">
              전체
            </mat-panel-title>
          </mat-expansion-panel-header>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="true" *ngIf="isCountriesLoaded">
          <mat-expansion-panel-header>
            <mat-panel-title>
              국가별
            </mat-panel-title>
          </mat-expansion-panel-header>
          <p class="pointer" *ngFor="let c of countries" (click)="onSelectCountry(c)" [style.background-color]="c===selectedCountry ? '#94c3f4' : ''">
            {{c.nameKR}}
          </p>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title>
              직업별
            </mat-panel-title>
          </mat-expansion-panel-header>
          <p class="pointer" *ngFor="let c of careers" (click)="onSelectCareer(c)" [style.background-color]="c===selectedCareer ? 'grey' : ''">
            {{c.name}}
          </p>
        </mat-expansion-panel>
      </mat-accordion>
    </div>

    <div class="col-lg-10 col-md-12">
      <div *ngIf="!isSearchResultLoaded">
        <mdb-spinner spinnerType="big" spinnerColor="yellow"></mdb-spinner>
      </div>
      <div class="row" *ngIf="isSearchResultLoaded">
        <div class="col-md-10 mx-auto">
          <div class="md-form">
            <input type="text" [(ngModel)]="searchText" class="form-control" id="search" mdbInputDirective>
            <label for="search">검색</label>
          </div>
        </div>
        <div class="col-md-3" *ngFor="let card of searchResult | searchFilter: {uploader: searchText, uploadedDate: searchText, countryKR: searchText, title: searchText} | paginate: { itemsPerPage: 8, currentPage: page }">
          <mat-card class="card card-body mb-3" (click)="onMatCardClick(card.videoPostId, card.youTubeVideoId)" style="cursor:pointer;">
            <mat-card-header>
              <div mat-card-avatar class="example-header-image" [ngStyle]="{'background-image':'url(' + backgroundUrl + card.countryEN +'.png' + ')'}"></div>
              <mat-card-title>{{card.uploader}}</mat-card-title>
              <mat-card-subtitle>{{card.uploadedDate | date:'yyyy-MM-dd'}}</mat-card-subtitle>
            </mat-card-header>
            <img mat-card-image src="https://img.youtube.com/vi/{{card.youTubeVideoId}}/hqdefault.jpg">
            <mat-card-content>
              <h6><strong>{{card.countryKR}} {{card.title}}</strong></h6>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <br />
      <div class="has-text-centered">
        <pagination-controls (pageChange)="page = $event"></pagination-controls>
      </div>
    </div>
  </div>
</section>